<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
	<meta http-equiv="Pragma" content="no-cache">
	<meta http-equiv="Expires" content="0">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
	<title>丽晶基金参考净值（发行价格 100 美元）</title>
	<!-- Include ECharts library -->
	<script src="https://cdn.jsdelivr.net/npm/echarts@5.1.2/dist/echarts.min.js?v=2"></script>
	<style>
	body,
	html {
		margin: 0;
		padding: 0;
		overflow: hidden;
	}

	#chart-container {
		width: 100vw;
		height: 80vh;
        padding: 20px;
	}

	#regentlogotext {
		text-align: center;
		padding-top: 20px;
		padding-bottom: 20px;
	}

	#button {
		padding-bottom: 20px;
	}
	        #regentlogo {
				margin-top: -50px;
				margin-bottom: -100px;
            text-align: center;
            padding-bottom: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

	</style>
</head>

<body>
	<!-- Container for the chart -->
    <div id="regentlogo">
        <img src="regentlogo.svg" alt="My Happy SVG" width="200" height="200"/>
    </div>
	<div id="regentlogotext">REGENT NAV (Reference Only)</div>
	<div id="button" style="text-align: center">
		<button type="button" class="btn btn-light" id="colorButton">红涨绿跌</button>
	</div>
	<div id="chart-container"></div>
	<script>
	var rawData = [
		['2023-06-26','100','100','0','0','100','100'],
		['2023-07-03','100.49','97.24','0','0','95.83','102.05'],
		['2023-07-10','96.98','107.37','0','0','94.95','110.63'],
		['2023-07-17','108','104.12','0','0','103.68','114.98'],
		['2023-07-24','104.83','110.29','0','0','102.93','111.44'],
		['2023-07-31','110.56','100.34','0','0','99.93','111.49'],
		['2023-08-07','101.78','95.34','0','0','94.15','102.93'],
		['2023-08-14','95.34','95.34','0','0','95.34','95.34'],
		['2023-08-21','95.34','95.34','0','0','95.34','95.34'],
		['2023-08-28','95.34','95.34','0','0','95.34','95.34'],
		['2023-09-04','95.34','95.34','0','0','95.34','95.34'],
		['2023-09-11','95.34','95.34','0','0','95.34','95.34'],
		['2023-09-18','95.34','95.34','0','0','95.34','95.34'],
		['2023-09-25','95.34','95.34','0','0','95.34','95.34'],
		['2023-10-02','95.34','95.34','0','0','95.34','95.34'],
		['2023-10-09','95.34','95.34','0','0','95.34','95.34'],
		['2023-10-16','95.34','95.34','0','0','95.34','95.34'],
		['2023-10-23','95.34','95.34','0','0','95.34','95.34'],
		['2023-10-30','95.34','95.34','0','0','95.34','95.34'],
		// ... Add more data here if needed
	];

	function calculateMA(dayCount, data) {
		var result = [];
		for(var i = 0, len = data.length; i < len; i++) {
			if(i < dayCount) {
				result.push('-');
				continue;
			}
			var sum = 0;
			for(var j = 0; j < dayCount; j++) {
				sum += data[i - j][1];
			}
			result.push(sum / dayCount);
		}
		return result;
	}
	var dates = rawData.map(function(item) {
		return item[0];
	});
	var data = rawData.map(function(item) {
		return [+item[1], +item[2], +item[5], +item[6]];
	});
	var option = {
		backgroundColor: '#161A25',
		legend: {
			data: ['Weekly Candlestick (周K)', 'MA5', 'MA10', 'MA20', 'MA30', 'MA60', 'MA120'],
			inactiveColor: '#777',
			textStyle: {
				color: '#fff'
			}
		},
		tooltip: {
			trigger: 'axis',
			axisPointer: {
				animation: false,
				type: 'cross',
				lineStyle: {
					color: '#376df4',
					width: 2,
					opacity: 1
				}
			}
		},
		xAxis: {
			type: 'category',
			data: dates,
			axisLine: {
				lineStyle: {
					color: '#8392A5'
				}
			}
		},
		yAxis: {
			scale: true,
			axisLine: {
				lineStyle: {
					color: '#8392A5'
				}
			},
			splitLine: {
				show: true,
				lineStyle: {
					color: '#22314D'
				}
			}
		},
		grid: {
			bottom: 80
		},
		dataZoom: [{
			textStyle: {
				color: '#8392A5'
			},
			handleIcon: 'M10.,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4v1.3h1.3v-1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7V23h6.6V24.4z M13.3,19.6H6.7v-1.4h6.6V19.6z',
			handleSize: '80%',
			dataBackground: {
				areaStyle: {
					color: '#8392A5'
				},
				lineStyle: {
					opacity: 0.8,
					color: '#8392A5'
				}
			},
			handleStyle: {
				color: '#fff',
				shadowBlur: 3,
				shadowColor: 'rgba(0, 0, 0, 0.6)',
				shadowOffsetX: 2,
				shadowOffsetY: 2
			}
		}, {
			type: 'inside'
		}],
		animation: true,
		  series: [
    {
      type: 'candlestick',
      name: 'Weekly Candlestick (周K)',
      data: data,
      barWidth: '90%',
      barGap: '10%',
      barCategoryGap: '10%',
      itemStyle: {
        color: '#161A25',
        color0: '#FF1674',
        borderColor: '#00AF9D',
        borderColor0: '#FF1674',
        borderWidth: 1,
        barBorderRadius: [5, 5, 0, 0], // Rounded corners: top-left, top-right, bottom-right, bottom-left
      },
    },
  ],

	};
	// Render the chart using ECharts
	var chart = echarts.init(document.getElementById('chart-container'));
	chart.setOption(option);
	// Update chart size when window is resized
	function resizeChart() {
		chart.resize();
	}
	window.addEventListener('resize', resizeChart);
	var colorButton = document.getElementById('colorButton');
	colorButton.addEventListener('click', function() {
		// Update series itemStyle colors
		option.series[0].itemStyle.borderColor = '#FF1674';
		option.series[0].itemStyle.color0 = '#00AF9D';
		option.series[0].itemStyle.borderColor0 = '#00AF9D';
		// Redraw the chart with updated colors
		chart.setOption(option);
	});
	</script>
</body>

</html>
